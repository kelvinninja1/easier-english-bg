!function(e){function t(t,n,o){if("object"!=typeof t&&(t={}),o){if("boolean"!=typeof t.isMenu){var s=o.children();t.isMenu=1==s.length&&s.is(n.panelNodetype)}return t}if("object"!=typeof t.onClick&&(t.onClick={}),"undefined"!=typeof t.onClick.setLocationHref&&(e[l].deprecated("onClick.setLocationHref option","!onClick.preventDefault"),"boolean"==typeof t.onClick.setLocationHref&&(t.onClick.preventDefault=!t.onClick.setLocationHref)),t=e.extend(!0,{},e[l].defaults,t),e[l].useOverflowScrollingFallback()){switch(t.position){case"top":case"right":case"bottom":e[l].debug('position: "'+t.position+'" not supported when using the overflowScrolling-fallback.'),t.position="left"}switch(t.zposition){case"front":case"next":e[l].debug('z-position: "'+t.zposition+'" not supported when using the overflowScrolling-fallback.'),t.zposition="back"}}return t}function n(t){return"object"!=typeof t&&(t={}),"undefined"!=typeof t.panelNodeType&&(e[l].deprecated("panelNodeType configuration option","panelNodetype"),t.panelNodetype=t.panelNodeType),t=e.extend(!0,{},e[l].configuration,t),"string"!=typeof t.pageSelector&&(t.pageSelector="> "+t.pageNodetype),t}function o(){c.$wndw=e(window),c.$html=e("html"),c.$body=e("body"),c.$allMenus=e(),e.each([d,h,u],function(e,t){t.add=function(e){e=e.split(" ");for(var n in e)t[e[n]]=t.mm(e[n])}}),d.mm=function(e){return"mm-"+e},d.add("menu ismenu panel list subtitle selected label spacer current highest hidden page blocker modal background opened opening subopened subopen fullsubopen subclose nooverflowscrolling"),d.umm=function(e){return"mm-"==e.slice(0,3)&&(e=e.slice(3)),e},h.mm=function(e){return"mm-"+e},h.add("parent style scrollTop offetLeft"),u.mm=function(e){return e+".mm"},u.add("toggle open opening opened close closing closed update setPage setSelected transitionend touchstart touchend mousedown mouseup click keydown keyup resize"),e[l]._c=d,e[l]._d=h,e[l]._e=u,e[l].glbl=c,e[l].useOverflowScrollingFallback(m)}function s(t,n){if(t.hasClass(d.current))return!1;var o=e("."+d.panel,n),s=o.filter("."+d.current);return o.removeClass(d.highest).removeClass(d.current).not(t).not(s).addClass(d.hidden),t.hasClass(d.opened)?s.addClass(d.highest).removeClass(d.opened).removeClass(d.subopened):(t.addClass(d.highest),s.addClass(d.subopened)),t.removeClass(d.hidden).removeClass(d.subopened).addClass(d.current).addClass(d.opened),"open"}function i(){return c.$scrollTopNode||(0!=c.$html.scrollTop()?c.$scrollTopNode=c.$html:0!=c.$body.scrollTop()&&(c.$scrollTopNode=c.$body)),c.$scrollTopNode?c.$scrollTopNode.scrollTop():0}function a(t,n,o){var s=e[l].support.transition;"webkitTransition"==s?t.one("webkitTransitionEnd",n):s?t.one(u.transitionend,n):setTimeout(n,o)}var l="mmenu",r="4.1.7";if(!e[l]){var c={$wndw:null,$html:null,$body:null,$page:null,$blck:null,$allMenus:null,$scrollTopNode:null},d={},u={},h={},p=0;e[l]=function(e,t,n){return c.$allMenus=c.$allMenus.add(e),this.$menu=e,this.opts=t,this.conf=n,this.serialnr=p++,this._init(),this},e[l].prototype={open:function(){return this._openSetup(),this._openFinish(),"open"},_openSetup:function(){var e=i();this.$menu.addClass(d.current),c.$allMenus.not(this.$menu).trigger(u.close),c.$page.data(h.style,c.$page.attr("style")||"").data(h.scrollTop,e).data(h.offetLeft,c.$page.offset().left);var t=0;c.$wndw.off(u.resize).on(u.resize,function(e,n){if(n||c.$html.hasClass(d.opened)){var o=c.$wndw.width();o!=t&&(t=o,c.$page.width(o-c.$page.data(h.offetLeft)))}}).trigger(u.resize,[!0]),this.conf.preventTabbing&&c.$wndw.off(u.keydown).on(u.keydown,function(e){return 9==e.keyCode?(e.preventDefault(),!1):void 0}),this.opts.modal&&c.$html.addClass(d.modal),this.opts.moveBackground&&c.$html.addClass(d.background),"left"!=this.opts.position&&c.$html.addClass(d.mm(this.opts.position)),"back"!=this.opts.zposition&&c.$html.addClass(d.mm(this.opts.zposition)),this.opts.classes&&c.$html.addClass(this.opts.classes),c.$html.addClass(d.opened),this.$menu.addClass(d.opened),c.$page.scrollTop(e),this.$menu.scrollTop(0)},_openFinish:function(){var e=this;a(c.$page,function(){e.$menu.trigger(u.opened)},this.conf.transitionDuration),c.$html.addClass(d.opening),this.$menu.trigger(u.opening),window.scrollTo(0,1)},close:function(){var e=this;return a(c.$page,function(){e.$menu.removeClass(d.current).removeClass(d.opened),c.$html.removeClass(d.opened).removeClass(d.modal).removeClass(d.background).removeClass(d.mm(e.opts.position)).removeClass(d.mm(e.opts.zposition)),e.opts.classes&&c.$html.removeClass(e.opts.classes),c.$wndw.off(u.resize).off(u.keydown),c.$page.attr("style",c.$page.data(h.style)),c.$scrollTopNode&&c.$scrollTopNode.scrollTop(c.$page.data(h.scrollTop)),e.$menu.trigger(u.closed)},this.conf.transitionDuration),c.$html.removeClass(d.opening),this.$menu.trigger(u.closing),"close"},_init:function(){if(this.opts=t(this.opts,this.conf,this.$menu),this.direction=this.opts.slidingSubmenus?"horizontal":"vertical",this._initPage(c.$page),this._initMenu(),this._initBlocker(),this._initPanles(),this._initLinks(),this._initOpenClose(),this._bindCustomEvents(),e[l].addons)for(var n=0;n<e[l].addons.length;n++)"function"==typeof this["_addon_"+e[l].addons[n]]&&this["_addon_"+e[l].addons[n]]()},_bindCustomEvents:function(){var t=this;this.$menu.off(u.open+" "+u.close+" "+u.setPage+" "+u.update).on(u.open+" "+u.close+" "+u.setPage+" "+u.update,function(e){e.stopPropagation()}),this.$menu.on(u.open,function(n){return e(this).hasClass(d.current)?(n.stopImmediatePropagation(),!1):t.open()}).on(u.close,function(n){return e(this).hasClass(d.current)?t.close():(n.stopImmediatePropagation(),!1)}).on(u.setPage,function(e,n){t._initPage(n),t._initOpenClose()});var n=this.$menu.find(this.opts.isMenu&&"horizontal"!=this.direction?"ul, ol":"."+d.panel);n.off(u.toggle+" "+u.open+" "+u.close).on(u.toggle+" "+u.open+" "+u.close,function(e){e.stopPropagation()}),"horizontal"==this.direction?n.on(u.open,function(){return s(e(this),t.$menu)}):n.on(u.toggle,function(){var t=e(this);return t.triggerHandler(t.parent().hasClass(d.opened)?u.close:u.open)}).on(u.open,function(){return e(this).parent().addClass(d.opened),"open"}).on(u.close,function(){return e(this).parent().removeClass(d.opened),"close"})},_initBlocker:function(){var t=this;c.$blck||(c.$blck=e('<div id="'+d.blocker+'" />').css("opacity",0).appendTo(c.$body)),c.$blck.off(u.touchstart).on(u.touchstart,function(e){e.preventDefault(),e.stopPropagation(),c.$blck.trigger(u.mousedown)}).on(u.mousedown,function(e){e.preventDefault(),c.$html.hasClass(d.modal)||t.$menu.trigger(u.close)})},_initPage:function(t){t||(t=e(this.conf.pageSelector,c.$body),t.length>1&&(e[l].debug("Multiple nodes found for the page-node, all nodes are wrapped in one <"+this.conf.pageNodetype+">."),t=t.wrapAll("<"+this.conf.pageNodetype+" />").parent())),t.addClass(d.page),c.$page=t},_initMenu:function(){this.conf.clone&&(this.$menu=this.$menu.clone(!0),this.$menu.add(this.$menu.find("*")).filter("[id]").each(function(){e(this).attr("id",d.mm(e(this).attr("id")))})),this.$menu.contents().each(function(){3==e(this)[0].nodeType&&e(this).remove()}),this.$menu.prependTo("body").addClass(d.menu),this.$menu.addClass(d.mm(this.direction)),this.opts.classes&&this.$menu.addClass(this.opts.classes),this.opts.isMenu&&this.$menu.addClass(d.ismenu),"left"!=this.opts.position&&this.$menu.addClass(d.mm(this.opts.position)),"back"!=this.opts.zposition&&this.$menu.addClass(d.mm(this.opts.zposition))},_initPanles:function(){var t=this;this.__refactorClass(e("."+this.conf.listClass,this.$menu),"list"),this.opts.isMenu&&e("ul, ol",this.$menu).not(".mm-nolist").addClass(d.list);var n=e("."+d.list+" > li",this.$menu);this.__refactorClass(n.filter("."+this.conf.selectedClass),"selected"),this.__refactorClass(n.filter("."+this.conf.labelClass),"label"),this.__refactorClass(n.filter("."+this.conf.spacerClass),"spacer"),n.off(u.setSelected).on(u.setSelected,function(t,o){t.stopPropagation(),n.removeClass(d.selected),"boolean"!=typeof o&&(o=!0),o&&e(this).addClass(d.selected)}),this.__refactorClass(e("."+this.conf.panelClass,this.$menu),"panel"),this.$menu.children().filter(this.conf.panelNodetype).add(this.$menu.find("."+d.list).children().children().filter(this.conf.panelNodetype)).addClass(d.panel);var o=e("."+d.panel,this.$menu);o.each(function(n){var o=e(this),s=o.attr("id")||d.mm("m"+t.serialnr+"-p"+n);o.attr("id",s)}),o.find("."+d.panel).each(function(){var n=e(this),o=n.is("ul, ol")?n:n.find("ul ,ol").first(),s=n.parent(),i=s.find("> a, > span"),a=s.closest("."+d.panel);if(n.data(h.parent,s),s.parent().is("."+d.list)){var l=e('<a class="'+d.subopen+'" href="#'+n.attr("id")+'" />').insertBefore(i);i.is("a")||l.addClass(d.fullsubopen),"horizontal"==t.direction&&o.prepend('<li class="'+d.subtitle+'"><a class="'+d.subclose+'" href="#'+a.attr("id")+'">'+i.text()+"</a></li>")}});var s="horizontal"==this.direction?u.open:u.toggle;if(o.each(function(){var n=e(this),o=n.attr("id");e('a[href="#'+o+'"]',t.$menu).off(u.click).on(u.click,function(e){e.preventDefault(),n.trigger(s)})}),"horizontal"==this.direction){var i=e("."+d.list+" > li."+d.selected,this.$menu);i.add(i.parents("li")).parents("li").removeClass(d.selected).end().each(function(){var t=e(this),n=t.find("> ."+d.panel);n.length&&(t.parents("."+d.panel).addClass(d.subopened),n.addClass(d.opened))}).closest("."+d.panel).addClass(d.opened).parents("."+d.panel).addClass(d.subopened)}else e("li."+d.selected,this.$menu).addClass(d.opened).parents("."+d.selected).removeClass(d.selected);var a=o.filter("."+d.opened);a.length||(a=o.first()),a.addClass(d.opened).last().addClass(d.current),"horizontal"==this.direction&&o.find("."+d.panel).appendTo(this.$menu)},_initLinks:function(){var t=this;e("."+d.list+" > li > a",this.$menu).not("."+d.subopen).not("."+d.subclose).not('[rel="external"]').not('[target="_blank"]').off(u.click).on(u.click,function(n){var o=e(this),s=o.attr("href");t.__valueOrFn(t.opts.onClick.setSelected,o)&&o.parent().trigger(u.setSelected);var i=t.__valueOrFn(t.opts.onClick.preventDefault,o,"#"==s.slice(0,1));i&&n.preventDefault(),t.__valueOrFn(t.opts.onClick.blockUI,o,!i)&&c.$html.addClass(d.blocking),t.__valueOrFn(t.opts.onClick.close,o,i)&&t.$menu.triggerHandler(u.close)})},_initOpenClose:function(){var t=this,n=this.$menu.attr("id");n&&n.length&&(this.conf.clone&&(n=d.umm(n)),e('a[href="#'+n+'"]').off(u.click).on(u.click,function(e){e.preventDefault(),t.$menu.trigger(u.open)}));var n=c.$page.attr("id");n&&n.length&&e('a[href="#'+n+'"]').off(u.click).on(u.click,function(e){e.preventDefault(),t.$menu.trigger(u.close)})},__valueOrFn:function(e,t,n){return"function"==typeof e?e.call(t[0]):"undefined"==typeof e&&"undefined"!=typeof n?n:e},__refactorClass:function(e,t){e.removeClass(this.conf[t+"Class"]).addClass(d[t])}},e.fn[l]=function(s,i){return c.$wndw||o(),s=t(s,i),i=n(i),this.each(function(){var t=e(this);t.data(l)||t.data(l,new e[l](t,s,i))})},e[l].version=r,e[l].defaults={position:"left",zposition:"back",moveBackground:!0,slidingSubmenus:!0,modal:!1,classes:"",onClick:{setSelected:!0}},e[l].configuration={preventTabbing:!0,panelClass:"Panel",listClass:"List",selectedClass:"Selected",labelClass:"Label",spacerClass:"Spacer",pageNodetype:"div",panelNodetype:"ul, ol, div",transitionDuration:400},function(){var t=window.document,n=window.navigator.userAgent,o=document.createElement("div").style,s="ontouchstart"in t,i="WebkitOverflowScrolling"in t.documentElement.style,a=function(){return"webkitTransition"in o?"webkitTransition":"transition"in o}(),r=function(){return n.indexOf("Android")>=0&&2.4>parseFloat(n.slice(n.indexOf("Android")+8))}();e[l].support={touch:s,transition:a,oldAndroidBrowser:r,overflowscrolling:function(){return!s||(!!i||!r)}()}}(),e[l].useOverflowScrollingFallback=function(e){return c.$html?("boolean"==typeof e&&c.$html[e?"addClass":"removeClass"](d.nooverflowscrolling),c.$html.hasClass(d.nooverflowscrolling)):(m=e,e)},e[l].debug=function(){},e[l].deprecated=function(e,t){"undefined"!=typeof console&&"undefined"!=typeof console.warn&&console.warn("MMENU: "+e+" is deprecated, use "+t+" instead.")};var m=!e[l].support.overflowscrolling}}(jQuery),function(e,t){"use strict";"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.Headroom=t()}(this,function(){"use strict";function e(e){this.callback=e,this.ticking=!1}function t(e){return e&&"undefined"!=typeof window&&(e===window||e.nodeType)}function n(e){if(arguments.length<=0)throw new Error("Missing arguments in extend function");var o,s,i=e||{};for(s=1;s<arguments.length;s++){var a=arguments[s]||{};for(o in a)"object"!=typeof i[o]||t(i[o])?i[o]=i[o]||a[o]:i[o]=n(i[o],a[o])}return i}function o(e){return e===Object(e)?e:{down:e,up:e}}function s(e,t){t=n(t,s.options),this.lastKnownScrollY=0,this.elem=e,this.tolerance=o(t.tolerance),this.classes=t.classes,this.offset=t.offset,this.scroller=t.scroller,this.initialised=!1,this.onPin=t.onPin,this.onUnpin=t.onUnpin,this.onTop=t.onTop,this.onNotTop=t.onNotTop,this.onBottom=t.onBottom,this.onNotBottom=t.onNotBottom}var i={bind:!!function(){}.bind,classList:"classList"in document.documentElement,rAF:!!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame)};return window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,e.prototype={constructor:e,update:function(){this.callback&&this.callback(),this.ticking=!1},requestTick:function(){this.ticking||(requestAnimationFrame(this.rafCallback||(this.rafCallback=this.update.bind(this))),this.ticking=!0)},handleEvent:function(){this.requestTick()}},s.prototype={constructor:s,init:function(){if(s.cutsTheMustard)return this.debouncer=new e(this.update.bind(this)),this.elem.classList.add(this.classes.initial),setTimeout(this.attachEvent.bind(this),100),this},destroy:function(){var e=this.classes;this.initialised=!1,this.elem.classList.remove(e.unpinned,e.pinned,e.top,e.notTop,e.initial),this.scroller.removeEventListener("scroll",this.debouncer,!1)},attachEvent:function(){this.initialised||(this.lastKnownScrollY=this.getScrollY(),this.initialised=!0,this.scroller.addEventListener("scroll",this.debouncer,!1),this.debouncer.handleEvent())},unpin:function(){var e=this.elem.classList,t=this.classes;!e.contains(t.pinned)&&e.contains(t.unpinned)||(e.add(t.unpinned),e.remove(t.pinned),this.onUnpin&&this.onUnpin.call(this))},pin:function(){var e=this.elem.classList,t=this.classes;e.contains(t.unpinned)&&(e.remove(t.unpinned),e.add(t.pinned),this.onPin&&this.onPin.call(this))},top:function(){var e=this.elem.classList,t=this.classes;e.contains(t.top)||(e.add(t.top),e.remove(t.notTop),this.onTop&&this.onTop.call(this))},notTop:function(){var e=this.elem.classList,t=this.classes;e.contains(t.notTop)||(e.add(t.notTop),e.remove(t.top),this.onNotTop&&this.onNotTop.call(this))},bottom:function(){var e=this.elem.classList,t=this.classes;e.contains(t.bottom)||(e.add(t.bottom),e.remove(t.notBottom),this.onBottom&&this.onBottom.call(this))},notBottom:function(){var e=this.elem.classList,t=this.classes;e.contains(t.notBottom)||(e.add(t.notBottom),e.remove(t.bottom),this.onNotBottom&&this.onNotBottom.call(this))},getScrollY:function(){return void 0!==this.scroller.pageYOffset?this.scroller.pageYOffset:void 0!==this.scroller.scrollTop?this.scroller.scrollTop:(document.documentElement||document.body.parentNode||document.body).scrollTop},getViewportHeight:function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},getElementPhysicalHeight:function(e){return Math.max(e.offsetHeight,e.clientHeight)},getScrollerPhysicalHeight:function(){return this.scroller===window||this.scroller===document.body?this.getViewportHeight():this.getElementPhysicalHeight(this.scroller)},getDocumentHeight:function(){var e=document.body,t=document.documentElement;return Math.max(e.scrollHeight,t.scrollHeight,e.offsetHeight,t.offsetHeight,e.clientHeight,t.clientHeight)},getElementHeight:function(e){return Math.max(e.scrollHeight,e.offsetHeight,e.clientHeight)},getScrollerHeight:function(){return this.scroller===window||this.scroller===document.body?this.getDocumentHeight():this.getElementHeight(this.scroller)},isOutOfBounds:function(e){var t=e<0,n=e+this.getScrollerPhysicalHeight()>this.getScrollerHeight();return t||n},toleranceExceeded:function(e,t){return Math.abs(e-this.lastKnownScrollY)>=this.tolerance[t]},shouldUnpin:function(e,t){var n=e>this.lastKnownScrollY,o=e>=this.offset;return n&&o&&t},shouldPin:function(e,t){var n=e<this.lastKnownScrollY,o=e<=this.offset;return n&&t||o},update:function(){var e=this.getScrollY(),t=e>this.lastKnownScrollY?"down":"up",n=this.toleranceExceeded(e,t);this.isOutOfBounds(e)||(e<=this.offset?this.top():this.notTop(),e+this.getViewportHeight()>=this.getScrollerHeight()?this.bottom():this.notBottom(),this.shouldUnpin(e,n)?this.unpin():this.shouldPin(e,n)&&this.pin(),this.lastKnownScrollY=e)}},s.options={tolerance:{up:0,down:0},offset:0,scroller:window,classes:{pinned:"headroom--pinned",unpinned:"headroom--unpinned",top:"headroom--top",notTop:"headroom--not-top",bottom:"headroom--bottom",notBottom:"headroom--not-bottom",initial:"headroom"}},s.cutsTheMustard="undefined"!=typeof i&&i.rAF&&i.bind&&i.classList,s}),function(){window.EEApp=window.EEApp||{},EEApp.TextToSpeech={init:function(){if("speechSynthesis"in window){var e=new SpeechSynthesisUtterance;e.voiceURI="native",e.lang="en-US",$("[data-say]").on("click",function(){e.text=$(this).text().trim(),speechSynthesis.speak(e)});var t="/content/themes/easier-english-bg-theme/css/text-to-speech.min.css";$.get(t,function(e){$("<style>"+e+"</style>").appendTo("head")})}}}}(),function(){window.EEApp=window.EEApp||{},EEApp.MobileMenu=function(){function e(){$mainMenu=$("#menu-default-menu"),$mainMenuLiElements=$mainMenu.find("> li").not(".menu-item-has-children"),$allLessonsCategoriesLiElement=$mainMenu.find(".menu-item-has-children").find("li");var e='<nav id="mobile_menu"><ul>';return $mainMenuLiElements.each(function(t,n){e+="<li>"+$(n).html()+"</li>"}),e+='<li><a id="fore-mobile-menu-lesson-categories" href="javascript:;">Уроци по категории</a><ul id="mobile_categories_submenu">',$allLessonsCategoriesLiElement.each(function(t,n){e+="<li>"+$(n).html()+"</li>"}),e+="</ul></li>",e+='<li><form role="search" method="get" class="searchform" action="//easierenglish.bg/"><input type="text" value="" name="s" id="s" placeholder="Потърси урок..."></form></li>',e+="</ul></nav>"}var t=this;t.init=function(){var t=e();$("body").append(t),$("#mobile_menu").mmenu();var n=$("#masthead");n.append('<a id="fire-mobile-menu" class="mobile_menu_button" href="javascript:;"><div class="mobile_menu_icon"></div></a>'),$(document).on("click","#fire-mobile-menu",function(){$("#mobile_menu").trigger("open")}).on("click","#fore-mobile-menu-lesson-categories",function(){$("#mobile_categories_submenu").trigger("open")}),$.fn.moveTo=function(e){return this.each(function(){var t=$(this).clone();$(t).prependTo(e),$(this).remove()})},n.moveTo(".mm-page")};var n=null;$(window).on("resize",function(){n&&(clearTimeout(n),n=null),n=setTimeout(function(){$(window).width()<800&&(t.init(),$(window).off("resize"))},300)}).trigger("resize")}}(),$(document).ready(function(){function e(){var e=window.location.href.match(/([^\/])+/g);return e[e.length-1]}function t(e,t,n){for(i=0;i<t.length;i++){var o=$("#"+t[i]);""==o.val()||o.val()==emptyerror?(o.addClass("error"),o.val(emptyerror)):o.removeClass("error")}return/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(n.val())||(n.addClass("error"),n.val(emailerror)),!e.find(":input").hasClass("error")}EEApp.TextToSpeech.init(),EEApp.MobileMenu(),$feedbackBtnsHolder=$("#feedback-btns-holder"),$("#positive-feedback").on("click",function(){$feedbackBtnsHolder.addClass("hidden"),$("#social-box").removeClass("hidden"),ga("send","event",{eventCategory:"Feedback",eventAction:"reply",eventLabel:"Yes"})}),$("#negative-feedback").on("click",function(){$feedbackBtnsHolder.addClass("hidden"),$("#suggestion-box").removeClass("hidden"),ga("send","event",{eventCategory:"Feedback",eventAction:"reply",eventLabel:"No"})});var n=$("#masthead").get(0),o=new Headroom(n,{offset:205,tolerance:5,classes:{initial:"animated",pinned:"swingInX",unpinned:"swingOutX"}});o.init(),$("#close_exam").on("click",function(){$(".overlay").fadeOut(),$("#exam_popup").fadeOut(),history.pushState("",document.title,window.location.pathname),$(window).off("popstate")}),$(".js-start_exam").on("click",function(){window.history.pushState("startExam",null,"./#startExam"),$("#exam_popup, .overlay").fadeIn(700),$("html, body").animate({scrollTop:0},700),$(window).on("popstate",function(){$("#close_exam").trigger("click")})}),$("body").prepend("<div class='overlay' style='display: none;'></div>"),$("#exam_popup").appendTo("body"),"#startExam"==e()&&$(".js-start_exam").trigger("click"),$.fn.randomize=function(e){return this.each(function(){var t=$(this),n=t.children(e);n.sort(function(){return Math.round(Math.random())-.5}),t.remove(e);for(var o=0;o<n.length;o++)t.append(n[o])})},$("#exam li").randomize("div.option"),$(".checkbox, .text").on("click",function(){$(this).closest("li").find(".option").removeClass("active wrong correct"),$(this).closest("li").find(".error_message").fadeOut(),$(this).closest(".option").addClass("active")}),$("#check_results").on("click",function(){var e=0,t=0;$("#exam li").each(function(){var n=$(this).find(".active");if("X"==n.data("true"))$(this).data("answer","correct"),e++,$(this).find(".error_message").fadeOut(),$(this).removeClass("try_again"),n.addClass("correct");else{$(this).data("answer","wrong"),$(this).addClass("try_again"),t++;var o=$(this).find(".error_message");0==n.length?o.text(o.data("no-answer")).fadeIn():(o.text(n.data("error-message")).fadeIn(),n.addClass("wrong"))}});var n=$("#exam_popup .result");if(t>0){var o=0;o=n.is(":visible")?-10:45,$("html, body").animate({scrollTop:$(".try_again:first").offset().top+o},700),$("#check_results").text("Провери отново!")}else $("html, body").animate({scrollTop:0},700);var s=window.location.href,i="//dummyimage.com/400x400/ACE1AF/FFFFFF?text=EXERCISE",a="Упражнение по английски език | EasierEnglish.BG",l="Резултат: "+e+" верни отговора от общо "+c+" въпроса.",r="//www.facebook.com/sharer.php?s=100&p[title]="+a+"&p[summary]="+l+"&p[url]="+encodeURIComponent(s)+"&p[images][0]="+i;jQuery("#ref_fb").attr("href",r);var c=$("#exam li").length;e>=parseInt(c)/2+1?(n.removeClass("bad").addClass("good"),$("#ref_fb").fadeIn()):n.removeClass("good").addClass("bad"),n.html("Резултат: <strong>"+e+" верни отговора</strong> от общо "+c+".").fadeIn()}),emptyerror="Задължително поле!",emailerror="Въведи валиден e-mail!",$(":input").focus(function(){$(this).hasClass("error")&&($(this).val(""),$(this).removeClass("error"))}),$contactsForm=$("#contactsForm");var s=["contact_name","contact_email","contact_message"];$contactsForm_email=$("#contact_email"),$contactsForm.submit(function(){if(t($contactsForm,s,$contactsForm_email)){var e=$.post(templateUrl+"/EmailSenders/sendMailFormContacts.php",{contact_name:$("#contact_name").val(),contact_email:$("#contact_email").val(),contact_subject:$("#contact_subject").val(),contact_message:$("#contact_message").val()});return e.success(function(){$contactsForm.fadeOut(function(){$contactsForm.html("<strong class='success'>Получихме съобщението! :)</strong>").fadeIn()})}),!1}return!1}),$("#submit_contactsForm").on("click",function(){return $contactsForm.submit(),!1}),$askQuestion_form=$("#get-free-consultation-form");var a=["contact_name","contact_email","contact_message"];$askQuestion_form_email=$("#contact_email"),$askQuestion_form.submit(function(){if(t($askQuestion_form,a,$askQuestion_form_email)){var e=$.post(templateUrl+"/EmailSenders/sendQuestion.php",{contact_name:$("#contact_name").val(),contact_email:$("#contact_email").val(),contact_message:$("#contact_message").val(),contact_city:$("#contact_city").val(),contact_age:$("#contact_age").val(),topic:$("h1").text()});return e.success(function(){$askQuestion_form.fadeOut(function(){$("#feedback_form").html("<p><strong class='success'>Получихме въпроса :)</strong> Очаквай отговор от нас.</p>").hide().fadeIn(600)})}),e.error(function(){$askQuestion_form.fadeOut(function(){$("#feedback_form").append("<p><strong class='fail'>Ооооупс, нещо формата се счупи :(</strong> Опитай да ни изпратиш запитването директно на мейл: <a href='mailto:team@easierenglish.bg'>team@easierenglish.bg</a> :)</p>").hide().fadeIn(600)})}),!1}return!1}),$("#submit_questionForm").on("click",function(){return $askQuestion_form.submit(),!1});var l=$("#teacherApply_div");l.hide(),$("#fireTeacherApply_form").on("click",function(){$(this).fadeOut(),l.slideDown()}),$teacherApply_form=$("#teacherApply_form");var r=["teacher_name","teacher_email","teacher_message"];$teacherApply_form_email=$("#teacher_email"),$teacherApply_form.submit(function(){if(t($teacherApply_form,r,$teacherApply_form_email)){var e=$.post(templateUrl+"/EmailSenders/applyForTeacher.php",{teacher_name:$("#teacher_name").val(),teacher_linkedin:$("#teacher_linkedin").val(),teacher_phone:$("#teacher_phone").val(),teacher_email:$("#teacher_email").val(),teacher_message:$("#teacher_message").val()});return e.success(function(){$teacherApply_form.fadeOut(function(){$teacherApply_form.html("<p><strong class='success'>Заявката е получена!</strong> Съвсем скоро ще се свържем с теб :)</p>").hide().fadeIn(600)})}),!1}return!1}),$("#submit_applyForTeacherForm").on("click",function(){return $teacherApply_form.submit(),!1}),l.hide(),$("#fireTeacherApply_form").on("click",function(){$(this).fadeOut(),l.slideDown()}),$lessonRequest_form=$("#LessonResuestForm"),$lessonRequest_form.hide(),$("#fireLessonRequest_form").on("click",function(){$lessonRequest_form.slideToggle()});var c=["request_contact_name","request_contact_email","request_message"];$lessonRequest_form_email=$("#request_contact_email"),$lessonRequest_form.submit(function(){if(t($lessonRequest_form,c,$lessonRequest_form_email)){var e=$.post(templateUrl+"/EmailSenders/requestLesson.php",{request_contact_name:$("#request_contact_name").val(),request_contact_email:$("#request_contact_email").val(),request_message:$("#request_message").val()});return e.success(function(){$lessonRequest_form.fadeOut(function(){$lessonRequest_form.html("<p><strong class='success'>Молбата е получена!</strong> Когато урокът е готов, ще се свържем с теб :)</p>").hide().fadeIn(600)})}),!1}return!1}),$("#submit_lessonRequestForm").on("click",function(){return $lessonRequest_form.submit(),!1});var d=$("#feedback_form");$("#fire_feedbackForm").on("click",function(){d.is(":visible")?d.slideUp():d.slideDown()}),$.expr[":"].textEquals=$.expr.createPseudo(function(e){return function(t){return $(t).text().match("^"+e+"$")}});var u=$("#post_mainContent");if(u.size()>0){var h=u.find("h2");if(h.size()>0){var p="<p class='autoGeneratedContent_heading'>Съдържание на урока:</p><ol id='pageAutoContent' class='pageAutoContent'>";h.each(function(e,t){p+="<li>"+$(t).text()+"</li>"}),p+="</ol>",u.find("p:first").after(p),$("#pageAutoContent").on("click","li",function(){var e=$.trim($(this).text()),t=$("h2:contains("+e+")");$("html, body").animate({scrollTop:t.offset().top-$("#masthead").height()-10},1e3,function(){t.addClass("highlight"),t.animate({opacity:"0.8","background-color":"red"},300,function(){t.animate({opacity:"1"},300),t.removeClass("highlight")})})})}}var m=$("#questions_accordion > dd").hide();$("#questions_accordion > dt > a").click(function(){var e=$(this).parent().next();e.is(":visible")?e.slideUp():(m.slideUp(),e.slideDown())}),/Opera/.test(navigator.userAgent)&&$("body").css("font-family","Arial, sans-serif")});